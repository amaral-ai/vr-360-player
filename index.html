<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>VR 360 Player</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- CSS simples -->
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
    }
    #ui {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 9999;
      background: rgba(0,0,0,0.4);
      padding: 12px;
      border-radius: 6px;
    }
    .hidden-video {
      display: none;
    }
  </style>
</head>
<body>

<div id="ui">
  <div>
    <label>Selecionar pasta de v√≠deos:</label>
    <input type="file" id="folderInput" webkitdirectory multiple />
  </div>
  <div style="margin-top:10px;">
    <button id="playPauseBtn" disabled>Play</button>
    <button id="reloadBtn" disabled>Recarregar</button>
  </div>
  <div id="status" style="margin-top:10px;">Nenhuma pasta selecionada.</div>
</div>

<!-- Cena VR -->
<a-scene vr-mode-ui="enabled: true" device-orientation-permission-ui="enabled: true">

  <a-assets id="assets"></a-assets>

  <!-- C√¢mera -->
  <a-entity camera look-controls wasd-controls position="0 1.6 0"></a-entity>

  <!-- Luz simples -->
  <a-entity light="type: ambient; color: #FFF"></a-entity>

  <!-- Hex√°gono de pain√©is (3m x 4m) -->
  <a-plane id="panel-0" position="0 1.6 -4" rotation="0 0 0" width="3" height="4" material="color: black"></a-plane>
  <a-plane id="panel-1" position="3.464 1.6 -2" rotation="0 -60 0" width="3" height="4" material="color: black"></a-plane>
  <a-plane id="panel-2" position="3.464 1.6 2" rotation="0 -120 0" width="3" height="4" material="color: black"></a-plane>
  <a-plane id="panel-3" position="0 1.6 4" rotation="0 180 0" width="3" height="4" material="color: black"></a-plane>
  <a-plane id="panel-4" position="-3.464 1.6 2" rotation="0 120 0" width="3" height="4" material="color: black"></a-plane>
  <a-plane id="panel-5" position="-3.464 1.6 -2" rotation="0 60 0" width="3" height="4" material="color: black"></a-plane>

</a-scene>

<!-- Scripts -->
<script src="videos.js"></script>

<!-- HACK DE AUTOPLAY ‚Äî obrigat√≥rio no Chrome/VR -->
<script>
window.addEventListener("click", () => {
  if (!window.VR360 || !VR360.panelVideos) return;

  console.log("üîß Desbloqueando autoplay‚Ä¶");

  VR360.panelVideos.forEach(v => {
    if (!v) return;
    v.muted = true;
    v.play().then(() => {
      console.log("üé¨ V√≠deo tocando ap√≥s clique:", v.id);
    }).catch(err => {
      console.warn("‚ö†Ô∏è N√£o conseguiu tocar ap√≥s clique:", v.id, err);
    });
  });
});
</script>

</body>
</html>
